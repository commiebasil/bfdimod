add_namespace = BUN_YFC
add_namespace = BUN_borderwars

country_event = {
	id = BUN_YFC.1
	title = BUN_YFC.1.t
	desc = BUN_YFC.1.desc
	picture = GFX_Temp_event

	fire_only_once = yes
	is_triggered_only = yes
	
	option = {
		name = BUN_YFC.1.a
		add_war_support = 0.1
		add_stability = 0.05
		country_lock_all_division_template = no
		remove_country_leader_trait = insurgent_leader
		delete_unit_template_and_units = {
			division_template = "Armed Insurgents"
			disband = no 
		}
		remove_dynamic_modifier = { modifier = idea_BUN_Ticking_Bomb }
		YFC = {
			country_event = {
				id = BUN_YFC.2
				hours = 2
				random_hours = 2
			}
		}
		hidden_effect = {
			country_event = {
				id = BUN_YFC.4
				days = 12
				random_hours = 50
			}
		}
	}
}

country_event = { 
	id = BUN_YFC.2
	title = BUN_YFC.2.t
	desc = BUN_YFC.2.desc
	picture = GFX_Temp_event

	fire_only_once = no
	is_triggered_only = yes

	option = {
		name = BUN_YFC.2.a
		add_war_support = -0.1
		add_stability = -0.2
		add_political_power = -300
		white_peace = BUN
		IF = {
			limit = {
				has_war_with = CRN
			}
			white_peace = CRN
		}
		BUN = {
			transfer_state = 212
			transfer_state = 85
			IF = {
				limit = {
					CRN = {
						AND = {
							NOT = {controls_state = 217}
							NOT = {controls_state = 218}
						}
					}
				}
				transfer_state = 217
				transfer_state = 218
			}
		}	
	}
}

country_event = {
	id = BUN_YFC.3
	title = BUN_YFC.3.t
	desc = BUN_YFC.3.desc
	picture = GFX_Temp_event

	fire_only_once = yes
	is_triggered_only = no

	trigger = {
		tag = BUN
		country_exists = BUN
		has_dynamic_modifier = {
			modifier = idea_BUN_Ticking_Bomb
		}
		has_war_with = YFC
		controls_province = 5679
		YFC = {has_country_flag = has_blocky_be_face}
	}

	option = {
		name = BUN_YFC.3.a
		add_war_support = 0.05
		custom_effect_tooltip = l_YFC_BLOCKY
	}
}

country_event = { 
	id = BUN_YFC.4
	title = BUN_YFC.4.t
	desc = BUN_YFC.4.desc
	picture = GFX_Temp_event

	fire_only_once = no
	is_triggered_only = yes

	option = {
		name = BUN_YFC.4.a
		add_ideas = {idea_BUN_victorious_in_blood}
		add_ideas = {disarmed_nation}
		hidden_effect = {
			IF = {
				limit = {
					CRN = {
						check_variable = {
							var_CRN_BUN_Support > 0
						}
					}
				}
				country_event = {
					id = BUN_YFC.5
					days = 7
					random_hours = 50
				}
			}
		}
	}
}

country_event = { 
	id = BUN_YFC.5
	title = BUN_YFC.5.t
	desc = BUN_YFC.5.desc
	picture = GFX_Temp_event

	is_triggered_only = yes

	option = {
		name = BUN_YFC.5.a
		IF = {
			limit = {
				is_in_faction_with = CRN
			}
			CRN = {set_faction_name = "Southern Trading League"}
		}
		ELSE = {
			CRN = {
				create_faction = "Southern Trading League"
				add_to_faction = BUN
			}
		}
	}

	option = {
		name = BUN_YFC.5.b
		add_political_power = 25
	}
}

country_event = { 
	id = BUN_YFC.6
	title = BUN_YFC.6.t
	desc = BUN_YFC.6.desc
	picture = GFX_Temp_event

	is_triggered_only = yes

	option = {
		name = BUN_YFC.6.a
		white_peace = BUN
		add_war_support = -0.01
		add_political_power = -25
		IF = {
			limit = {
				has_war_with = CRN
			}
			white_peace = CRN
		}
		BUN = {
			transfer_state = 212
			transfer_state = 85
			give_resource_rights = { receiver = YFC state = 85 }
			IF = {
				limit = {
					CRN = {
						AND = {
							NOT = {controls_state = 217}
							NOT = {controls_state = 218}
						}
					}
				}
				transfer_state = 217
				transfer_state = 218
			}
		}
		212 = {set_demilitarized_zone = yes}	
		hidden_effect = {
			BUN = {
				country_lock_all_division_template = no
				remove_country_leader_trait = insurgent_leader
				delete_unit_template_and_units = {
					division_template = "Armed Insurgents"
					disband = no 
				}
				remove_dynamic_modifier = { modifier = idea_BUN_Ticking_Bomb }
				country_event = {
					id = BUN_YFC.4
					days = 12
					random_hours = 50
				}
			}
		}
	}

	option = {
		name = BUN_YFC.6.b
		add_manpower = 5000
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 500
		}
		add_timed_idea = {
			idea = idea_YFC_operation_enforcement
			days = 60
		}
	}
}

########RAIDS EVENTS########

country_event = {
	#ONLY AI CAN SEE THIS!!
	id = BUN_borderwars.1
	title = BUN_borderwars.1.t
	desc = BUN_borderwars.1.desc
	picture = GFX_YFC_raids1

	fire_only_once = no
	is_triggered_only = yes

	option = {
		name = BUN_borderwars.1.a
		trigger = {
			has_border_war = no
		}
		add_manpower = 250
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 50
		}
		set_variable = { var_currently_raiding = 0 }
	}
	option = {
		name = BUN_borderwars.1.b
		trigger = {
			has_border_war = yes
		}

		add_manpower = 1000
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 100
		}
		set_variable = { var_currently_raiding = 0 }
		if = {
			limit = {
				has_border_war_between = {
					attacker = 212
					defender = 201
				}
			}
			finalize_border_war = {
				attacker_win = no
					attacker = 212
					defender = 201
			}
		}				
		else_if = {
			limit = {
					has_border_war_between = {
						attacker = 85
						defender = 202
					}
			}
			finalize_border_war = {
				attacker_win = no
				attacker = 85
				defender = 202
			}
		}
		else_if = {
			limit = {
				has_border_war_between = {
					attacker = 217
					defender = 209
				}
			}
			finalize_border_war = {
				attacker_win = no
				attacker = 217
				defender = 209
			}
		}
		else_if = {
			limit = {
				has_border_war_between = {
					attacker = 212
					defender = 24
				}
			}
			finalize_border_war = {
				attacker_win = no
				attacker = 212
				defender = 24
			}
		}
		else_if = {
			limit = {
				has_border_war_between = {
					attacker = 218
					defender = 178
				}
			}
			finalize_border_war = {
				attacker_win = no
				attacker = 218
				defender = 178
			}
		}
		else_if = {
			limit = {
				has_border_war_between = {
					attacker = 85
					defender = 214
				}
			}
			finalize_border_war = {
				attacker_win = no
				attacker = 85
				defender = 214
			}
		}
		else_if = {
			limit = {
				has_border_war_between = {
					attacker = 218
					defender = 33
				}
			}
			finalize_border_war = {
				attacker_win = no
				attacker = 218
				defender = 33
			}
		}
		else = {
			#Nothing ever happens
		}
	}
}


country_event = {
	#Defender loses view
	id = BUN_borderwars.5
	title = BUN_borderwars.5.t
	desc = BUN_borderwars.5.desc
	picture = GFX_YFC_raids1

	fire_only_once = no
	is_triggered_only = yes

	option = {
		name = BUN_borderwars.5.a
		custom_effect_tooltip = l_YFC_raid_effect
		hidden_effect = {
			random_list = {
				10 = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = -250
					}
					BUN = {
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 250
						}
					}
				}
				20 = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = -350
					}
					BUN = {
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 350
						}
					}
				}
				40 = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = -500
					}
					BUN = {
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 500
						}
					}
				}
				20 = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = -750
					}
					BUN = {
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 750
						}
					}
				}
				10 = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = -1000
					}
					BUN = {
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 1000
						}
					}
				}
			}

			IF = {
				limit = {
					has_tech = tech_support
				}
				random_list = {
					20 = {
						#Nothing ever happens
					}
					40 = {
						add_equipment_to_stockpile = {
							type = support_equipment_1
							amount = -50
						}
						BUN = {
							add_equipment_to_stockpile = {
								type = support_equipment_1
								amount = 50
							}
						}
					}
					40 = {
						add_equipment_to_stockpile = {
							type = support_equipment_1
							amount = -100
						}
						BUN = {
							add_equipment_to_stockpile = {
								type = support_equipment_1
								amount = 100
							}
						}
					}
				}
			}

			IF = {
				limit = {
					has_tech = gw_artillery
				}
				random_list = {
					20 = {
						#Nothing ever happens
					}
					40 = {
						add_equipment_to_stockpile = {
							type = artillery_equipment_1
							amount = -50
						}
						BUN = {
							add_equipment_to_stockpile = {
								type = artillery_equipment_1
								amount = 50
							}
						}
					}
					40 = {
						add_equipment_to_stockpile = {
							type = artillery_equipment_1
							amount = -100
						}
						BUN = {
							add_equipment_to_stockpile = {
								type = artillery_equipment_1
								amount = 100
							}
						}
					}
				}
			}
		}	
	}
}